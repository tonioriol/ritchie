image:
  repository: ghcr.io/martinbjeldbak/acestream-http-proxy
  # Switch back to upstream latest (per request) to test whether newer builds
  # improve stream compatibility.
  tag: latest
  pullPolicy: Always

# Match the known-good legacy ritchie setup:
# - run privileged
# - persist engine state under /root/.ACEStream
# - do NOT pin AceStream engine version (let the image defaults decide)
acestream:
  stateDir: "/root/.ACEStream"
  privileged: true
  runAsUser: 0

service:
  type: NodePort
  port: 6878
  nodePort: 30878

# AceStream benefits from inbound connectivity. Expose the engine's P2P/control
# ports on the node via hostPort (see templates/deployment.yaml).
#
# Observed on neumann (engine logs + /proc/net/tcp):
# - 8621: "LM" listen port
# - 62062: i2i (instance-to-instance) port
p2p:
  enabled: true
  port: 8621
  i2iPort: 62062

# Optional: provide a portless HTTPS endpoint (like the legacy ritchie nginx reverse-proxy)
# by running an in-cluster nginx reverse proxy + Traefik Ingress.
proxy:
  enabled: true

ingress:
  enabled: true
  host: ace.tonioriol.com
  tls:
    enabled: true
    issuer: letsencrypt-prod
    secretName: ace-tonioriol-com-tls
